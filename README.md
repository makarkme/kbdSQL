# kbdSQL
**Educational database management system; student project of LETI - Krivonosov, Bugrov, Dolgiy**

## Описание

# 1. Хранение данных:

*Каждая коллекция хранится в отдельной директории

*Каждый документ сохраняется в отдельном JSON-файле

*Уникальный идентификатор документа генерируется автоматически

# 2. Индексация:

*Использование индексов для ускорения поиска

*Реализация B-дерева для индексации

*Поддержка индексации по любым полям документа

*Автоматическое обновление индексов при добавлении новых документов

# 3. Язык запросов:

*Поддержка операторов сравнения (eq,ne,gt,lt,gte,lte)

*Базовые операторы выбора (SELECT через find({}))

*Логические операторы (AND через несколько условий, OR через специальный синтаксис)

*Работа с:

    *Строками (точные совпадения)

    *Числами (диапазоны значений)

    *Датами (сравнение строк в формате ISO)

    *Массивами (поиск в массивах)

    *Логическими значениями (boolean)

*Реализованные функции:

    1. Для строк:

        $lower: Сравнение без учета регистра

        $upper: Сравнение без учета регистра

        $regex: Поиск по регулярному выражению

        $length: Проверка длины строки

    2. Для чисел:

        Операторы сравнения

        Поддержка математических выражений через условия

    3. Для дат (требует расширения):

        $year: Извлечение года из даты

        $month: Извлечение месяца из даты

        Сравнение дат в ISO формате

*Поддержка вложенных полей через точечную нотацию

# 4. Особенности реализации:

*Легковесная архитектура без внешних зависимостей

*Простая расширяемость для добавления новых функций

*Поддержка сложных структур данных JSON


## Использование:

1. Создайте экземпляр базы данных

2. Получите коллекцию

3. Выполняйте операции вставки, создания индексов и поиска

# Добавление эл-ов в БД (В коде)

    db = Database("test_db")
    users = db.get_collection("users")
    
    # Очищаем коллекцию
    for f in os.listdir(users.path):
        os.remove(os.path.join(users.path, f))
    
    # Новые тестовые данные
    users.insert({
        "name": "Alice",
        "age": 25,
        "email": "Alice@Example.com",
        "tags": ["admin", "user"],
        "bio": "Python developer"
    })

# Добавление эл-ов в БД (В CLI)

    # Запуск
    python jdb.py test_db

    jdb> USE users
    Switched to collection 'users'

    jdb> INSERT {'name': 'Alice', 'age': 25, 'tags': ['admin']}
    Inserted document ID: d7a3b9c1...

    jdb> INDEX age
    Index created on field 'age'

# Получение из БД (В коде)

    Поиск всех документов: find({})

    Поиск по точному совпадению: find({"age": 25})

    Поиск с операторами сравнения: find({"age": {"$gt": 28}})

    Пример использования в коде:

    print("\nПользователи младше или равные 35:")
    for user in users.find({"age": {"$lte": 35}}):
        print(f"{user['name']} ({user['age']})")

# Получение из БД (В CLI)

    jdb> FIND {'age': {'$gt': 20}}
    {
    "name": "Alice",
    "age": 25,
    "tags": ["admin"],
    "_id": "d7a3b9c1..."
    }
    Found 1 documents

    jdb> EXIT
    Exiting...