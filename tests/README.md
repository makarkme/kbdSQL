# Описание тестов

Этот репозиторий содержит интеграционные и модульные тесты для основных компонентов проекта, реализующего файловую базу данных с поддержкой запросов и индексирования.

## Структура тестов

### 1. `test_btree.py`
Тесты для структуры данных **B-дерево**:
- **`TestNode`** проверяет базовые операции над узлами дерева (`get_keys`, `get_values`, `append_pair`, `insert_pair`, `pop_pair`, `remove_value`, `slice_data`, `replace_data`).
- **`TestBTreeInsert`** проверяет корректность вставки новых элементов в дерево, сохранение структуры дерева после вставки.
- **`TestBTreeDelete`** тестирует удаление ключей и восстановление баланса дерева после удаления.
- **`TestBTreeRemoveID`** тестирует удаление конкретных значений из списков значений узлов по заданному ID.

### 2. `test_cli_core.py`
Интеграционные тесты для командного интерфейса (`cli_core`):
- Проверяются создание базы данных, вставка документов, выполнение различных условий поиска (`@eq`, `@ne`, `@gt`, `@lt`, `@gte`, `@lte`, `@abs`, `@round`, `@regex`, `@length`, `@year`, `@month`, `@day`).
- Проверяется составные логические запросы (`@or`, `@and`, `@not`).
- Тестируются удаление документов и индексирование полей.

### 3. `test_collection.py`
Интеграционные тесты для слоя коллекций (`collection`):
- Тестируются вставка, удаление и получение JSON-документов.
- Проверяется поиск по условиям (включая вложенные поля) и обработка некорректных запросов.
- Проверяется корректность обработки пустых запросов и поиска по несуществующим полям.

### 4. `test_database.py`
Интеграционные тесты для уровня базы данных (`database`):
- Тестируются вставка, удаление, индексирование и поиск документов.
- Обрабатываются ошибки некорректного JSON.
- Проверяется поддержка нескольких коллекций в одной базе данных.
- Тестируются сценарии поиска по вложенным полям и после удаления всех документов.

### 5. `test_indexation.py`
Интеграционные тесты для системы индексации (`indexation`):
- Тестируется создание индексов по полям, сохранение и загрузка индексов.
- Проверяется ускоренный поиск с помощью индексированных данных.
- Проверяется удаление записей из индексов и обработка несуществующих записей и полей.
- Тестируются множественные индексы для разных полей.

### 6. `test_query_engine.py`
Тесты для движка обработки запросов (`query_engine`):
- Проверяются базовые операции сравнения (`@eq`, `@ne`, `@gt`, `@lt`, `@gte`, `@lte`).
- Проверяется поддержка регулярных выражений (`@regex`), длины (`@length`), списков значений, вложенных полей и сложных логических условий (`@and`, `@or`, `@not`).
- Обрабатываются некорректные запросы, неверные типы данных, пустые документы и другие исключительные ситуации.

## Основные проверяемые сценарии
- Управление данными: вставка, удаление, поиск документов.
- Построение и использование индексов для оптимизации запросов.
- Корректная работа логических операторов в запросах.
- Защита от некорректного ввода и ошибок при работе с JSON.
- Тестирование вложенных структур данных и сложных условий.

## Запуск тестов

Для запуска всех тестов используйте:

```bash
python -m unittest discover
